(()=>{"use strict";var e={53:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TAB_ID_KEY=t.SEARCH_KANJI=void 0,t.SEARCH_KANJI="search-kanji",t.TAB_ID_KEY="search-kanji-tab-id"},782:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setItem=t.getItem=void 0,t.getItem=async e=>{},t.setItem=async(e,t)=>t},787:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.openNewTab=t.getSelectedText=void 0;const o=n(53),a=n(782);t.getSelectedText=()=>new Promise(((e,t)=>{chrome.tabs.query({active:!0,currentWindow:!0},(n=>{const o=n[0].id;o?chrome.tabs.sendMessage(o,"GET_SELECTED_TEXT",(t=>{e(t)})):t("could not find current tab id")}))})),t.openNewTab=async e=>{var t;const n=await chrome.tabs.create({url:e});await a.setItem(o.TAB_ID_KEY,(null===(t=null==n?void 0:n.id)||void 0===t?void 0:t.toString())||"")}}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{const e=n(53),t=n(782),o=n(787);chrome.contextMenus.create({id:e.SEARCH_KANJI,title:"Kanji Search %s",contexts:["selection"]});const a=async n=>{const a=null==n?void 0:n.trim();if(!a)return;a[0],a[0];const r=`https://jisho.org/search/%23kanji%20${a}`,c=Number(await t.getItem(e.TAB_ID_KEY));c>0&&await(e=>chrome.tabs.get(e).then((e=>!!e)).catch((()=>!1)))(c)?chrome.tabs.update(c,{active:!0,url:r}):await o.openNewTab(r)};chrome.contextMenus.onClicked.addListener((t=>{t.menuItemId!==e.SEARCH_KANJI||a(t.selectionText)})),chrome.commands.onCommand.addListener((e=>{"search-selected-kanji"===e&&o.getSelectedText().then((e=>a(e)))}))})()})();