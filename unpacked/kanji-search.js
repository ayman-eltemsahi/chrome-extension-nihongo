(()=>{"use strict";const e="search-kanji",t="search-kanji-tab-id";chrome.contextMenus.create({id:e,title:"Kanji Search %s",contexts:["selection"]});chrome.contextMenus.onClicked.addListener((a=>{a.menuItemId!==e||(async e=>{var a,i;const c=`https://www.japandict.com/kanji/${null===(a=e.selectionText)||void 0===a?void 0:a.trim()[0]}`,o=Number(await(n=t,new Promise((e=>chrome.storage.local.get([n],(t=>e(null==t?void 0:t[n])))))));var n,r;if(o>0&&await(e=>chrome.tabs.get(e).then((e=>!!e)).catch((()=>!1)))(o))chrome.tabs.update(o,{active:!0,url:c});else{const e=await chrome.tabs.create({url:c});await(r=(null===(i=null==e?void 0:e.id)||void 0===i?void 0:i.toString())||"",new Promise((e=>chrome.storage.local.set({"search-kanji-tab-id":r},(()=>e(r))))))}})(a)}))})();