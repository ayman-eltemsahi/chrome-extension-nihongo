(()=>{"use strict";var e={787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedText=void 0,t.getSelectedText=()=>new Promise(((e,t)=>{chrome.tabs.query({active:!0,currentWindow:!0},(r=>{const o=r[0].id;o?chrome.tabs.sendMessage(o,"GET_SELECTED_TEXT",(t=>{e(t)})):t("could not find current tab id")}))}))}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}(()=>{const e=r(787),t="search-kanji",o="search-kanji-tab-id";chrome.contextMenus.create({id:t,title:"Kanji Search %s",contexts:["selection"]});const a=async e=>{var t;const r=null==e?void 0:e.trim();if(!r)return;r[0],r[0];const a=`https://jisho.org/search/%23kanji%20${r}`,n=Number(await(c=o,new Promise((e=>chrome.storage.local.get([c],(t=>e(null==t?void 0:t[c])))))));var c,s;if(n>0&&await(e=>chrome.tabs.get(e).then((e=>!!e)).catch((()=>!1)))(n))chrome.tabs.update(n,{active:!0,url:a});else{const e=await chrome.tabs.create({url:a});await(s=(null===(t=null==e?void 0:e.id)||void 0===t?void 0:t.toString())||"",new Promise((e=>chrome.storage.local.set({"search-kanji-tab-id":s},(()=>e(s))))))}};chrome.contextMenus.onClicked.addListener((e=>{e.menuItemId!==t||a(e.selectionText)})),chrome.commands.onCommand.addListener((t=>{"search-selected-kanji"===t&&e.getSelectedText().then((e=>a(e)))}))})()})();