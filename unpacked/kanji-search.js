(()=>{"use strict";var e={787:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedText=void 0,t.getSelectedText=()=>new Promise(((e,t)=>{chrome.tabs.query({active:!0,currentWindow:!0},(a=>{const o=a[0].id;o?chrome.tabs.sendMessage(o,"GET_SELECTED_TEXT",(t=>{e(t)})):t("could not find current tab id")}))}))}},t={};function a(o){var r=t[o];if(void 0!==r)return r.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,a),c.exports}(()=>{const e=a(787),t="search-kanji",o="search-kanji-tab-id";chrome.contextMenus.create({id:t,title:"Kanji Search %s",contexts:["selection"]});const r=async e=>{var t;const a=`https://app.kanjialive.com/${null==e?void 0:e.trim()[0]}`,r=Number(await(c=o,new Promise((e=>chrome.storage.local.get([c],(t=>e(null==t?void 0:t[c])))))));var c,n;if(r>0&&await(e=>chrome.tabs.get(e).then((e=>!!e)).catch((()=>!1)))(r))chrome.tabs.update(r,{active:!0,url:a});else{const e=await chrome.tabs.create({url:a});await(n=(null===(t=null==e?void 0:e.id)||void 0===t?void 0:t.toString())||"",new Promise((e=>chrome.storage.local.set({"search-kanji-tab-id":n},(()=>e(n))))))}};chrome.contextMenus.onClicked.addListener((e=>{e.menuItemId!==t||r(e.selectionText)})),chrome.commands.onCommand.addListener((t=>{"search-selected-kanji"===t&&e.getSelectedText().then((e=>r(e)))}))})()})();